<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head}"></head>
<body>
<div th:replace="~{fragments/header}"></div>
<!--/*@thymesVar id="rhodo" type="com.rhododendra.model.Rhododendron"*/-->

<div class="content">
    <div class="description-container">
        <h1>
            <!--        todo, make this a fragment for the preview card-->
            <span th:if="${rhodo.isCultivarGroup()}" th:text="|Cultivar Group R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isSpeciesSelection()}" th:text="|Species Selection R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isSpecies()}" th:text="|Species R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isNaturalHybrid()}" th:text="|Natural Hybrid R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isHybridRhodo()}" th:text="|Rhododendron Hybrid R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isVireyaHybrid()}" th:text="|Vireya Hybrid R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isAzaleaHybrid()}" th:text="|Azalea Hybrid R. '${#strings.capitalize(rhodo.getName())}'|"></span>
            <span th:if="${rhodo.isAzaleodendronHybrid()}" th:text="|Azaleodendron R. '${#strings.capitalize(rhodo.getName())}'|"></span>
        </h1>
        <h2 th:if="${rhodo.isSpeciesSelection()}" th:inline="text">
            [[|'${rhodo.name}' is a selection of |]]
            <a th:href="@{'/rhodos/'+ ${original_species.getId()}}" th:text="|R. ${original_species.getName()}|"></a>
        </h2>
        <table class="bordered-table attributes-detail-table">
            <tr th:if="${not rhodo.getBotanical_synonyms().isEmpty()}">
                <td class="key"><b>Botanical<br/>Synonyms</b></td>
                <td class="value">
                    <th:block th:each="synonym, iterStat : ${rhodo.getBotanical_synonyms()}">

                    <span th:if="${synonym.botanical_shorts().isEmpty()}"
                          th:text="'R. ' + ${synonym.synonym()}"></span>
                        <span th:if="${not synonym.botanical_shorts().isEmpty()}"
                              th:text="${'R. ' + #strings.capitalize(synonym.synonym())} + ' ('+ ${#strings.listJoin(synonym.botanical_shorts(), ',')} + ')'"></span>
                        <br th:if="${not iterStat.last}"/>
                    </th:block>
                </td>
            </tr>
            <tr th:if="${not rhodo.getSynonyms().isEmpty()}">
                <td><b class="key">Synonyms</b></td>
                <td class="value">
                    <th:block th:each="synonym : ${rhodo.getSynonyms()}">
                        <span th:text="${#strings.capitalize(synonym)}"></span>
                    </th:block>
                </td>
            </tr>
            <th:block th:if="${rhodo.isSpeciesSelection()}">
                <tr>
                    <td class="key"><b>Selected By</b></td>
                    <td class="value" th:if="${rhodo.getHybridizer().getHybridizer()  != null}"
                        th:text="${rhodo.getHybridizer().getHybridizer() }"></td>
                    <td class="value" th:if="${rhodo.getHybridizer().getHybridizer()  == null}">Unknown</td>
                </tr>
            </th:block>
            <th:block th:if="${rhodo.isCultivar()}">
                <tr>
                    <td class="key"><b>Hybridized By</b></td>
                    <td class="value" th:if="${rhodo.getHybridizer().getHybridizer() != null}"
                        th:text="${rhodo.getHybridizer().getHybridizer() }"></td>
                    <td class="value" th:if="${rhodo.getHybridizer().getHybridizer()  == null}">Unknown</td>
                </tr>
                <tr>
            </th:block>
            <th:block th:if="${rhodo.getAzalea_group() != null}">
                <tr>
                    <td class="key"><b>Azalea group</b></td>
                    <td class="value" th:text="${rhodo.getAzalea_group()}"></td>
                </tr>
            </th:block>
            <th:block th:if="${rhodo.getTaxonomy() != null}">
                <tr>
                    <td class="key"><b>Subgenus</b></td>
                    <td class="value" th:text="${rhodo.getTaxonomy().getSubgenus()}"></td>
                </tr>
                <tr>
                    <td class="key"><b>Section</b></td>
                    <td class="value" th:text="${rhodo.getTaxonomy().getSection()}"></td>
                </tr>
                <tr>
                    <td class="key"><b>Subsection</b></td>
                    <td class="value" th:text="${rhodo.getTaxonomy().getSubsection()}"></td>
                </tr>
            </th:block>
            <th:block th:if="${rhodo.getParentage() != null}">
                <td class="key"><b>Pollen Parent</b></td>
                <th:block th:if="${rhodo.getParentage().getPollen_parent() != null}">
                    <td class="value" th:if="${rhodo.getParentage().getPollen_parent_id() != null}">
                        <a th:href="@{'/rhodos/'+ ${rhodo.getParentage().getPollen_parent_id}}"
                           th:text="${rhodo.getParentage().getPollen_parent()}">
                        </a>
                    </td>
                    <td class="value" th:if="${rhodo.getParentage().getPollen_parent_id() == null}"
                        th:text="${rhodo.getParentage().getPollen_parent()}">
                    </td>
                </th:block>
                <td class="value" th:if="${rhodo.getParentage().getPollen_parent() == null}">?</td>
                <tr>
                    <td class="key"><b>Seed Parent</b></td>
                    <th:block th:if="${rhodo.getParentage().getSeed_parent() != null}">
                        <td class="value" th:if="${rhodo.getParentage().getSeed_parent_id() != null}">
                            <a th:href="@{'/rhodos/'+ ${rhodo.getParentage().getSeed_parent_id}}"
                               th:text="${rhodo.getParentage().getSeed_parent()}">
                            </a>
                        </td>
                        <td class="value" th:if="${rhodo.getParentage().getSeed_parent_id() == null}"
                            th:text="${rhodo.getParentage().getSeed_parent()}">
                        </td>
                    </th:block>
                    <td class="value" th:if="${rhodo.getParentage().getSeed_parent() == null}">?</td>
                </tr>
            </th:block>
            <tr th:if="${rhodo.getCultivation_since() != null}">
                <td class="key"><b>In cultivation since</b></td>
                <td class="value" th:text="${rhodo.getCultivation_since()}"></td>
            </tr>
            <tr th:if="${rhodo.getFirst_described() != null}">
                <td class="key"><b>First Described</b></td>
                <td class="value" th:if="${rhodo.getFirst_described() != null}">
                    <span th:text="${rhodo.getFirst_described()}"></span>
                    <span th:if="${not rhodo.getFirst_described_botanists().isEmpty()}"
                          th:text="' ('+ ${#strings.listJoin(rhodo.getFirst_described_botanists(), ',')} + ')'"></span>
                </td>
            </tr>
            <tr th:if="${rhodo.getOrigin_location() != null}">
                <td class="key"><b>Origin</b></td>
                <td class="value" th:text="${rhodo.getOrigin_location()}"></td>
            </tr>
            <tr th:if="${rhodo.getHabit() != null}">
                <td class="key"><b>Habitat</b></td>
                <td class="value" th:text="${rhodo.getHabit()}"></td>
            </tr>
            <tr>
                <td class="key"><b>10 Year Height</b></td>
                <td class="value" th:if="${rhodo.getTen_year_height() != null}"
                    th:text="${rhodo.getTen_year_height()}"></td>
                <td class="value" th:if="${rhodo.getTen_year_height() == null}">?</td>
            </tr>
            <tr th:if="${rhodo.getObserved_mature_height() != null}">
                <td class="key"><b>Mature Wild Height</b></td>
                <td class="value" th:text="${rhodo.getObserved_mature_height()}"></td>
            </tr>
            <tr>
                <td class="key"><b>Bloom Time</b></td>
                <td class="value" th:if="${rhodo.getBloom_time() != null}" th:text="${rhodo.getBloom_time()}"></td>
                <td class="value" th:if="${rhodo.getBloom_time() == null}">?</td>
            </tr>
            <tr>
                <td class="key"><b>Flower</b></td>
                <td class="value" th:if="${rhodo.getFlower_shape() != null}" th:text="${rhodo.getFlower_shape()}"></td>
                <td class="value" th:if="${rhodo.getFlower_shape() == null}">?</td>
            </tr>
            <tr>
                <td class="key"><b>Predominant Colour</b></td>
                <td class="value" th:if="${rhodo.getColour() != null}" th:text="${rhodo.getColour()}"></td>
                <td class="value" th:if="${rhodo.getColour() == null}">?</td>
            </tr>
            <tr>
                <td class="key"><b>Leaves</b></td>
                <td class="value" th:if="${rhodo.getLeaf_shape()} != null" th:text="${rhodo.getLeaf_shape()}"></td>
                <td class="value" th:if="${rhodo.getLeaf_shape()} == null">?</td>
            </tr>
            <tr>
                <td class="key"><b>Winter Foliage</b></td>
                <td class="value" th:if="${rhodo.getDeciduous()} != null" th:text="${rhodo.getDeciduous()}"></td>
                <td class="value" th:if="${rhodo.getDeciduous()} == null">?</td>
            </tr>
            <tr th:if="${rhodo.getAdditional_parentage_info() != null}">
                <td class="key"><b>Additional<br/>Parentage Info</b></td>
                <td class="value" th:text="${rhodo.getAdditional_parentage_info()}"></td>
            </tr>
            <tr th:if="${rhodo.isElepedote() || rhodo.isLepedote()}">
                <td class="key"><b>Type</b></td>
                <td class="value" th:if="${rhodo.isElepedote()}">Elepedote</td>
                <td class="value" th:if="${rhodo.isLepedote()}">Lepedote</td>
            </tr>
            <tr>
                <td class="key"><b>Hardiness</b></td>
                <td class="value" th:if="${rhodo.getHardiness() != null}" th:text="${rhodo.getHardiness()}"></td>
                <td class="value" th:if="${rhodo.getHardiness() == null}">?</td>
            </tr>
            <tr th:if="${rhodo.getIrrc_registered() != null}">
                <td class="key"><b>Status</b></td>
                <td class="value" th:text="${rhodo.getIrrc_registered()}"></td>
            </tr>
        </table>
    </div>
    <table class="bordered-table picture-table">
        <tr th:each="resolvedPhotoDetail : ${resolvedPhotoDetails}">
            <td class="picture-td">
                <a th:href="${resolvedPhotoDetail.getResolvedHiResURL() != null ? resolvedPhotoDetail.getResolvedHiResURL() : resolvedPhotoDetail.getResolvedNormalURL()}">
                    <img th:src="${resolvedPhotoDetail.getResolvedNormalURL()}" width="400">
                </a>
            </td>
            <td class="table-description-text">
                <dl>
                    <dt>Photo By:</dt>
                    <dd th:if="${resolvedPhotoDetail.getPhotoDetails().getPhotoBy() != null}"
                        th:text="${resolvedPhotoDetail.getPhotoDetails().getPhotoBy()}"></dd>
                    <dd th:if="${resolvedPhotoDetail.getPhotoDetails().getPhotoBy() == null}">Unknown</dd>

                    <th:block th:if="${resolvedPhotoDetail.getPhotoDetails().getDate() != null}">
                        <dt>Date:</dt>
                        <dd th:text="${resolvedPhotoDetail.getPhotoDetails().getDate()}"></dd>
                    </th:block>

                    <th:block th:if="${resolvedPhotoDetail.getPhotoDetails().getLocation() != null}">
                        <dt>Location:</dt>
                        <dd th:text="${resolvedPhotoDetail.getPhotoDetails().getLocation()}"></dd>
                    </th:block>

                    <th:block
                            th:if="${resolvedPhotoDetail.getPhotoDetails().getDescription() != null && !resolvedPhotoDetail.getPhotoDetails().getDescription().isEmpty()}">
                        <dt>Description:</dt>
                        <dd th:text="${resolvedPhotoDetail.getPhotoDetails().getDescription()}"></dd>
                    </th:block>

                    <th:block th:if="${resolvedPhotoDetail.getResolvedHiResURL() != null}">
                        <dt>Hi-Resolution Version:</dt>
                        <dd><a th:href="${resolvedPhotoDetail.getResolvedHiResURL()}">Hi-res photo</a></dd>
                    </th:block>

                    <th:block th:if="${resolvedPhotoDetail.getResolvedTagURL() != null}">
                        <dt>Tag:</dt>
                        <dd><img th:src="${resolvedPhotoDetail.getResolvedTagURL()}"></dd>
                    </th:block>
                </dl>
            </td>
        </tr>
    </table>
</div>
</body>
</html>